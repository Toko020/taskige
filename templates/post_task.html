{% extends "base.html" %}
{% block content %}

<div class="center">
  <div class="card card-form">
    <h2 class="title" data-i18n="create_task">Create Task</h2>

    <form method="POST" action="{{ url_for('post_task_post') }}" class="form">
      <label class="label" data-i18n="task_title">Title</label>
      <input class="input" name="title" required maxlength="200" />

      <label class="label" data-i18n="task_desc">Description</label>
      <textarea class="input textarea" name="description" required rows="5"></textarea>

      <div class="grid2">
        <div>
          <label class="label" data-i18n="location">Location</label>
          <select class="input" name="location">
            <option>Remote</option>
            <option>On-site</option>
          </select>
        </div>

        <div>
          <label class="label" data-i18n="help_until_label">When you need help</label>
          <input class="input" name="help_until" placeholder="e.g. Tomorrow 18:00" required />
        </div>
      </div>

      <div class="grid2">
        <div>
          <label class="label" data-i18n="payment">Payment</label>
          <select class="input" name="payment_type" id="paymentType">
            <option value="Free">Free</option>
            <option value="Paid">Paid</option>
          </select>
        </div>

        <div>
          <label class="label" data-i18n="amount">Amount ($)</label>
          <input class="input" name="payment_amount" id="paymentAmount" type="number" min="0" placeholder="50" disabled />
        </div>
      </div>

      <button class="btn btn-wide" type="submit" data-i18n="post_task">Post Task</button>
    </form>
  </div>
</div>

<script>
  // Small inline logic for enabling amount when "Paid" is selected
  document.addEventListener("DOMContentLoaded", () => {
    const type = document.getElementById("paymentType");
    const amount = document.getElementById("paymentAmount");
    const toggle = () => {
      const paid = type.value === "Paid";
      amount.disabled = !paid;
      if (!paid) amount.value = "";
    };
    type.addEventListener("change", toggle);
    toggle();
  });
</script>

{% endblock %}
